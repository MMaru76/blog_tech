<!-- ---
title: 【Minecraft】Datadog を使った監視を真面目に考えてみる
description: Minecraft を使った監視の勉強
date: 2020-09-02
category: 
# sidebar: true
sidebar: "auto"
tags:
  - CentOS7
  - 監視
categories:
  - Minecraft
  - Datadog
--- -->

## はじめに

普段､Minecraft のプラグインサーバーを運用していく上でよくあるのが **｢急激に重い!｣**､**｢え?!めっちゃラグい!!｣**､**｢あれ?!サーバー落ちてない?!｣** などが...あります｡(たいへんもうしわけない)

> Minecraft鯖の運営者としては､ユーザーが快適に遊べるている = 【**つまりサービスが快適に提供出来ている**】

ただ､ユーザーからは重かった報告は上がるが･･･現状ではいつ重かったのか不明である｡<br>
ならば､監視ツールを入れて報告があった時間を確認して更にはトライ・アンド・エラーで直していこうと思う｡

以前に CloudWatch Agent を入れて､監視を実施していたが､わざわざ複数のステップを踏むのが面倒になって削除しました｡

ここのページでは､Datadog を用いて何を監視するかを定義する｡

### サーバーの環境

- CPU

|項目|値|
|:--:|:--:|
|アーキテクチャ|x86_64|
|Model name|Intel(R) Core(TM) i7-8700 CPU @ 3.20GHz|
|CPU(s)|12|

- メモリ(新品 同じ型で2枚差し : 合計32GB)

|項目|値|
|:--:|:--:|
|Size|16384 MB|
|Type|DDR4|
|Speed|2666 MT/s|

- グラボ無し
- LAN ケーブル CAT6 シリーズ(ELECOM製)

## 色々な目線で見てみる

### ユーザー目線

- Minecraftサーバーが正常に稼働
- Dynmapが正常に見れる
- 回線が重いか
- サーバーが重いか

### 【サーバー管理者目線】

- サーバーの22/443/8123/25565ポートが開いているか？
  - 22 : 【SSH】動作ポート
  - 443 : 【Nginx】リバースプロキシ 8123 => 443
  - 8123 : 【Dynmap】動作ポート
  - 25565 : 【Minecraft サーバ】動作ポート