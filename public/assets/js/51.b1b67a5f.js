(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{534:function(t,a,s){"use strict";s.r(a);var e=s(4),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-はじめに"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-はじめに"}},[t._v("#")]),t._v(" 1. はじめに")]),t._v(" "),s("p",[t._v("こんにちは､名古屋駅周辺で自動車関係のIT会社でDevOpsエンジニアをやっている "),s("a",{attrs:{href:"https://twitter.com/M_Maru76",target:"_blank",rel:"noopener noreferrer"}},[t._v("まるちゃん"),s("OutboundLink")],1),t._v(" です｡")]),t._v(" "),s("p",[t._v("皆さんは､一度は自宅でサーバー環境を構築して大量の仮想マシンを立ち上げて遊んでみたいと思ったことは...ありませんか?僕はあります｡")]),t._v(" "),s("p",[t._v("その夢をこの記事で叶える事が出来ます｡ただ､素直にAWSとかを触るのを断然オススメいたします｡")]),t._v(" "),s("p",[t._v("この場を借りて")]),t._v(" "),s("blockquote",[s("p",[t._v("当時､学生だった頃にオンラインゲームで知り合った程度の僕に "),s("strong",[t._v("VMware ESXi")]),t._v(" という素晴らしいサービスをご教示してくださった某Eさんへ､本当にありがとうございます｡"),s("br")]),t._v(" "),s("p",[t._v("お陰様で､インフラの沼にハマって抜け出せなくなりました｡")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_2-実行環境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-実行環境"}},[t._v("#")]),t._v(" 2. 実行環境")]),t._v(" "),s("p",[t._v("元々ゲーミングPCとして使っていたデスクトップPCをサーバー化してます｡")]),t._v(" "),s("ul",[s("li",[t._v("CPU : i7-3930K = 3.20GHz")]),t._v(" "),s("li",[t._v("メモリー : 28GiB = DDR3")])]),t._v(" "),s("p",[t._v("もし､仮想マシンを沢山立ち上げたい際は､4コア以上とメモリ16GB以上を用意してください｡")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_3-事前準備-realtek-8168内蔵のisoを作成手順"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-事前準備-realtek-8168内蔵のisoを作成手順"}},[t._v("#")]),t._v(" 3. 事前準備 Realtek 8168内蔵のISOを作成手順")]),t._v(" "),s("p",[t._v("パソコンにRealtek 8168のNICKが搭載されている場合は通常通りではインストールが成功致しませんので､Windowsにてインストールが成功するように環境を作成します｡")]),t._v(" "),s("p",[t._v("1: 必要なファイルをダウンロード")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://vibsdepot.v-front.de/wiki/index.php/Net55-r8168",target:"_blank",rel:"noopener noreferrer"}},[t._v("Net55-r8168"),s("OutboundLink")],1),t._v(" "),s("ul",[s("li",[t._v("｢VIB File of version 8.045a｣を選択してDL")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.v-front.de/p/esxi-customizer-ps.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ESXi-Customizer-PS"),s("OutboundLink")],1),t._v(" "),s("ul",[s("li",[t._v("｢Download latest version｣を選択してDL")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://my.vmware.com/jp/group/vmware/details?downloadGroup=PCLI650R1&productId=614",target:"_blank",rel:"noopener noreferrer"}},[t._v("VMware PowerCLI – installer"),s("OutboundLink")],1),t._v(" "),s("ul",[s("li",[t._v("｢今すぐダウンロード｣を選択してDL")])])])]),t._v(" "),s("p",[t._v("2 : 各種ファイルを移動")]),t._v(" "),s("p",[t._v("Cフォルダの直下に”ESXi-Customizer”を作成して､先程DLした ｢Net55-r8168｣ と ｢ESXi-Customizer-PS｣ を配置")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/99b5828bd96c01b2c3915e433019d911.png",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("フォルダ構造は以下の通り")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("・フォルダ：C:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ESXi-Customizer\n　- ファイル名：ESXi-Customizer-PS-v2.6.0.ps1\n　- ファイル名：net55-r8168-8.045a-napi.x86_64.vib\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("3 : コマンドを操作")]),t._v(" "),s("p",[t._v("PowerShellを管理者権限で起動してから､下記コマンドで実行ポリシーを変更する")]),t._v(" "),s("div",{staticClass:"language-PowerShell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PS")]),t._v(" C:\\WINDOWS\\system32> cd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PS")]),t._v(" C:\\>  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Set-ExecutionPolicy")]),t._v(" Unrestricted\n\n実行ポリシーの変更\n実行ポリシーは、信頼されていないスクリプトからの保護に役立ちます。実行ポリシーを変更すると、about_Execution_Policies\nのヘルプ トピック "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("https:"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("go"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("microsoft"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fwlink"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("?LinkID=135170"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nで説明されているセキュリティ上の危険にさらされる可能性があります。実行ポリシーを変更しますか?\n"),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Y]")]),t._v(" はい"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Y"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[A]")]),t._v(" すべて続行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("A"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[N]")]),t._v(" いいえ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("N"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[L]")]),t._v(" すべて無視"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("L"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[S]")]),t._v(" 中断"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("?"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ヘルプ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("既定値は "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"N"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": Y\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PS")]),t._v(" C:\\>\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("4 : VMware PowerCLIを操作\n最後にDLしたアプリケーションをパソコンにインストールすると以下の様に2個表示されます｡")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/066fe3f6d92065b3bcad19388b815e75.png",alt:"Image from Gyazo"}})]),t._v(" "),s("div",{staticClass:"language-PowerShell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[t._v("PowerCLI C:\\> cd C:\\ESXi"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Customizer\\\nPowerCLI C:\\ESXi"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Customizer>  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\ESXi"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Customizer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("6"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ps1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v67 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("pkgDir C:\\ESXi"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Customizer\\\n=> R を選択\n\n~~略~~\n\nAll done"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/5a88256c11ed3cbeb71e14542b04d3ba.png",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("5 : メディアに書き出し\nメディアへの書き出し手順は省きます｡")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/58d3d8a441a0ec8b92b941b868381f33.png",alt:"Image from Gyazo"}})]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"_4-vmware-esxi-セットアップ手順"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-vmware-esxi-セットアップ手順"}},[t._v("#")]),t._v(" 4. VMware ESXi セットアップ手順")]),t._v(" "),s("p",[t._v("焼いたメディアディスクをセットアップしたいデスクトップPCに入れて､Boot画面まで移動します｡")]),t._v(" "),s("p",[t._v("1 : Boot Menu")]),t._v(" "),s("ul",[s("li",[t._v("ESXi-6.7.0~~~Installerを選択")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/bd0d3949ab4314b340fdf58f8c4c1095.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("2 : Welcome")]),t._v(" "),s("ul",[s("li",[t._v("｢Enter｣キーを押す")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/9e4da3b36bca0b1b34f18e1b057ad0ec.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("3 : EULA")]),t._v(" "),s("ul",[s("li",[t._v("同意書に問題が無いなら｢F11｣キーを押す")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/940e6a285aa166941d74f227dff668e5.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("4 : Disk to Install")]),t._v(" "),s("ul",[s("li",[t._v("どのディスクにインストールをするのかを選択して｢Enter｣キーを押す")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/7df54b7cdfdd8db32997c7bc7801d043.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("5 : select a keyboard")]),t._v(" "),s("ul",[s("li",[t._v("使用しているキーボードの種類を選択して｢Enter｣キーを押す")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/c42b4370b22d3266163031232a3dd8ec.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("6 : root password")]),t._v(" "),s("ul",[s("li",[t._v("Rootユーザーのパスワード設定(なるべく硬いのにしましょう)\n"),s("ul",[s("li",[t._v("※忘れると大変です｡")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/50cced46246188ae7684c03bab505026.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("7 : Confirm Install")]),t._v(" "),s("ul",[s("li",[t._v("最終確認です！問題がなければ｢F11｣キーを押す")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/d208ee18cfd52883188ab3c8e16eaf0b.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("8 : Complete")]),t._v(" "),s("ul",[s("li",[t._v("下記の画面が表示されていれば､インストール完了です｡")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/c89d55c3d0bd60e56204b10c625712e9.jpg",alt:"Image from Gyazo"}})]),t._v(" "),s("p",[t._v("再起動後に下記のように表示されていれば､『Hello VMware ESXi World』です｡")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.gyazo.com/da87afa00a96c2309eb54d368fd3c289.jpg",alt:"Image from Gyazo"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);